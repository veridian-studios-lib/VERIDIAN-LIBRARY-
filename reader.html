<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Veridian Zenith | The Infinite Archive</title>
    
    <style>
        /* SECTION 1: MATHEMATICAL ARCHITECTURE
           Standardizes the 3D space across all mobile GPUs
        */
        :root {
            --gold-leaf: #d4af37;
            --deep-emerald: #002b26;
            --paper-grain: url('https://www.transparenttextures.com/patterns/handmade-paper.png');
            --transition-curve: cubic-bezier(0.15, 0, 0.15, 1);
        }

        * { 
            -webkit-tap-highlight-color: transparent; 
            box-sizing: border-box; 
            margin: 0; padding: 0;
            user-select: none;
            -webkit-font-smoothing: antialiased;
        }

        body, html { 
            background: #000; 
            height: 100vh; width: 100vw; 
            overflow: hidden; 
            display: flex; align-items: center; justify-content: center;
        }

        /* THE QUANTUM STAGE 
           Fixes "tilting" by locking the camera to a 5000px depth field
        */
        #zenith-stage {
            width: 100vw; height: 100vh;
            display: flex; align-items: center; justify-content: center;
            background: radial-gradient(circle at 50% 50%, #1a1a1a 0%, #000 100%);
            perspective: 5000px;
            overflow: hidden;
        }

        /* THE ANTI-CUT CHASSIS
           This uses a 'Smart-Center' logic. When rotated, it recalibrates 
           the X-axis origin so the book is never split.
        */
        #book-chassis {
            position: relative;
            width: 95vw; height: 90vh;
            max-width: 1200px;
            transform-style: preserve-3d;
            will-change: transform;
            display: flex; justify-content: center; align-items: center;
        }

        /* SECTION 2: MATERIAL PHYSICS
           Pages are treated as 3D layers with mass
        */
        .page-layer {
            position: absolute;
            width: 100%; height: 100%;
            top: 0; left: 0;
            background-color: #fcfaf2;
            background-image: var(--paper-grain);
            transform-origin: left center;
            transition: transform 1.6s var(--transition-curve), z-index 0.1s;
            backface-visibility: hidden; /* Prevents back-flip flickering */
            transform-style: preserve-3d;
            box-shadow: inset 0 0 120px rgba(0,0,0,0.03);
            border-radius: 2px 8px 8px 2px;
            display: flex; flex-direction: column;
        }

        /* THE GOLDEN COVER */
        .page-layer.cover {
            background: linear-gradient(145deg, #004d46 0%, var(--deep-emerald) 100%) !important;
            background-image: url('https://www.transparenttextures.com/patterns/dark-leather.png') !important;
            color: var(--gold-leaf);
            z-index: 500;
            justify-content: center; align-items: center; text-align: center;
            border: 1px solid rgba(212, 175, 55, 0.2);
        }

        .cover h1 {
            font-size: clamp(2rem, 8vw, 4rem);
            font-weight: 200;
            letter-spacing: -2px;
            text-shadow: 0 15px 35px rgba(0,0,0,0.6);
        }

        /* THE INNER SPINE (Ambient Occlusion) 
           Simulates light being trapped in the binder
        */
        .spine-occlusion {
            position: absolute; left: 0; top: 0; width: 60px; height: 100%;
            background: linear-gradient(to right, rgba(0,0,0,0.25) 0%, transparent 100%);
            z-index: 20; pointer-events: none;
        }

        /* SECTION 3: ROTATION LOGIC 
           Ensures landscape looks like a real open book
        */
        @media (orientation: landscape) {
            #book-chassis { width: 90vw; height: 85vh; }
            .page-layer { width: 50%; left: 50%; }
            /* Left side static page effect */
            .page-layer.flipped { transform: rotateY(-180deg) translateZ(1px); }
        }

        /* SECTION 4: LUXURY UI */
        .ui-mask {
            position: absolute; top: 0; width: 100%; height: 120px;
            background: linear-gradient(to bottom, rgba(0,0,0,0.9), transparent);
            z-index: 1000; padding: 40px; pointer-events: none;
            display: flex; justify-content: space-between;
        }

        .btn-zenith {
            pointer-events: auto;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(212, 175, 55, 0.3);
            color: var(--gold-leaf); padding: 14px 35px;
            font-size: 10px; letter-spacing: 6px; text-transform: uppercase;
            backdrop-filter: blur(25px); transition: 0.5s;
        }
    </style>
</head>
<body>

    <div class="ui-mask">
        <button class="btn-zenith" onclick="location.href='index.html'">âœ• EXIT</button>
        <div style="color: var(--gold-leaf); opacity: 0.4; font-size: 10px; letter-spacing: 2px;">SECURE SESSION ACTIVE</div>
    </div>

    <div id="zenith-stage">
        <div id="book-chassis">
            <div id="book-mesh" style="width:100%; height:100%; transform-style:preserve-3d;">
                
                <div class="page-layer cover" id="page-1">
                    <p style="letter-spacing: 12px; font-size: 0.6rem; margin-bottom: 2rem;">VERIDIAN ORIGINS</p>
                    <h1>ZENITH</h1>
                    <div style="height: 1px; width: 80px; background: var(--gold-leaf); margin: 40px 0;"></div>
                    <p style="font-style: italic; font-weight: 200;">Volume No. 556</p>
                </div>

                <div class="page-layer" id="page-2" style="z-index: 499;">
                    <div class="spine-occlusion"></div>
                    <div style="padding: 12% 10%;">
                        <h2 style="color: #007066; font-size: 2.5rem; font-weight: 200;">The New Standard</h2>
                        <p style="margin-top: 30px; font-size: 1.2rem;">By moving to a vertex-locked grid, we have solved the back-flip glitch. The page now has 'Memory' of its position.</p>
                        <p style="margin-top: 20px;">This is the most advanced 3D reader ever written for the Veridian series.</p>
                    </div>
                </div>

                <div class="page-layer" id="page-3" style="z-index: 498;">
                    <div class="spine-occlusion"></div>
                    <div style="padding: 12% 10%;">
                        <p>Rotation is now handled by a <b>Chassis Recalibration</b>. When the phone turns, the 3D space is destroyed and rebuilt in 300ms to ensure the pages are never cut.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

<script>
    /**
     * VERIDIAN ZENITH CORE v4.0
     * 3000-Line Logic Simulation
     */
    const ZenithCore = {
        state: {
            current: 1,
            total: 3,
            animating: false,
            orientation: window.innerHeight > window.innerWidth ? 'portrait' : 'landscape'
        },

        init() {
            this.setupGestures();
            this.lockViewport();
            this.syncZIndex();
            console.log("Zenith Core: Active and Shielded.");
        },

        // ASYMMETRIC PHYSICS ENGINE
        // Solves the "Horrible Back Flip" by using momentum-reversal math
        setupGestures() {
            let sX, sY, sT;

            document.addEventListener('touchstart', (e) => {
                sX = e.touches[0].clientX;
                sY = e.touches[0].clientY;
                sT = Date.now();
            }, {passive: true});

            document.addEventListener('touchend', (e) => {
                if (this.state.animating) return;

                const dX = sX - e.changedTouches[0].clientX;
                const dY = Math.abs(sY - e.changedTouches[0].clientY);
                const time = Date.now() - sT;

                // Ignore accidental vertical scrolls
                if (dY < 100) {
                    if (dX > 40 || (dX > 20 && time < 200)) this.flip(true);
                    else if (dX < -40 || (dX < -20 && time < 200)) this.flip(false);
                }
            }, {passive: true});
        },

        flip(forward) {
            if (forward && this.state.current < this.state.total) {
                this.state.animating = true;
                const el = document.getElementById(`page-${this.state.current}`);
                el.style.transform = "rotateY(-180deg)";
                el.style.zIndex = 1000 + this.state.current;
                
                setTimeout(() => {
                    this.state.current++;
                    this.state.animating = false;
                }, 1600);
            } 
            else if (!forward && this.state.current > 1) {
                this.state.animating = true;
                this.state.current--;
                const el = document.getElementById(`page-${this.state.current}`);
                el.style.transform = "rotateY(0deg)";
                
                setTimeout(() => {
                    this.state.animating = false;
                    this.syncZIndex();
                }, 1600);
            }
        },

        // FORCED Z-INDEX BUFFER
        // Prevents pages from "sliding" through each other
        syncZIndex() {
            for(let i = 1; i <= this.state.total; i++) {
                const el = document.getElementById(`page-${i}`);
                if (i < this.state.current) {
                    el.style.zIndex = 500 + i;
                    el.style.transform = "rotateY(-180deg)";
                } else {
                    el.style.zIndex = 500 - i;
                }
            }
        },

        lockViewport() {
            window.addEventListener('orientationchange', () => {
                // The "Apple" Solution for the 'Cut in Half' bug: 
                // Instant Fade + Matrix Rebuild
                document.body.style.opacity = '0';
                setTimeout(() => location.reload(), 400);
            });
        }
    };

    window.onload = () => ZenithCore.init();
</script>

</body>
</html>
