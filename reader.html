<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Veridian Immersive Reader</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/turn.js/3/turn.min.js"></script>
    <style>
        body { margin: 0; background-color: #1a1a1a; overflow: hidden; height: 100vh; width: 100vw; touch-action: none; }
        #flipbook { width: 100vw !important; height: 100vh !important; }
        .page { background-color: #fdf6e3; padding: 40px; box-sizing: border-box; font-family: 'Georgia', serif; font-size: 1.2rem; line-height: 1.6; width: 100vw; height: 100vh; }
        .cover { background-color: #007066 !important; color: white; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        .back-btn { position: absolute; top: 20px; left: 20px; z-index: 1000; color: white; background: rgba(0,0,0,0.5); border: none; padding: 10px 20px; border-radius: 30px; font-weight: bold; }
    </style>
</head>
<body>

    <button class="back-btn" onclick="location.href='index.html'">âœ• Close</button>

    <div id="flipbook">
        <div class="page cover"><h1>Veridian Origins</h1><p>Swipe to turn</p></div>
        <div class="page"><h2>Chapter 1</h2><p>The dawn was cold... the secrets whispered.</p></div>
        <div class="page"><h2>Chapter 2</h2><p>The journey continues...</p></div>
        <div class="page"><h2>The End</h2><p>Archive Preview Finished.</p></div>
    </div>

    <script>
        $(window).ready(function() {
            var book = $('#flipbook');
            
            book.turn({
                width: window.innerWidth,
                height: window.innerHeight,
                display: 'single', 
                acceleration: true,
                gradients: true,
                elevation: 150, // Even higher to help the curl
                duration: 600   // Faster speed prevents the "snap back"
            });

            // FORCE FLIP LOGIC: Detects swipe and forces page turn
            var startX;
            document.addEventListener('touchstart', function(e) {
                startX = e.touches[0].clientX;
            });

            document.addEventListener('touchend', function(e) {
                var endX = e.changedTouches[0].clientX;
                var threshold = 50; // pixels moved

                if (startX - endX > threshold) {
                    book.turn('next'); // Swipe Left -> Go Forward
                } else if (endX - startX > threshold) {
                    book.turn('previous'); // Swipe Right -> Go Back
                }
            });
        });

        $(window).resize(function() {
            $('#flipbook').turn('size', window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
