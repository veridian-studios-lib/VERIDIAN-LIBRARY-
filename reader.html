<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Veridian Reader | Illuminated Sanctum</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Fauna+One&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #D4AF37; --paper: #F3F0E6; --oak: #1A1108; }
        body { 
            font-family: 'Fauna One', serif; 
            background: #050505;
            margin: 0; overflow: hidden; display: flex; align-items: center; justify-content: center; height: 100vh;
            perspective: 2500px;
        }

        /* The Warm Library Lamp Glow */
        .lamp-glow {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 80vw; height: 80vw;
            background: radial-gradient(circle, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.05) 40%, transparent 70%);
            filter: blur(60px);
            pointer-events: none;
            z-index: 0;
        }

        .book-stage {
            position: relative;
            width: 85vw; max-width: 450px; height: 65vh;
            transform-style: preserve-3d;
            z-index: 10;
        }

        /* The Luxurious Page with Curved Corners */
        .page-sheet {
            position: absolute;
            inset: 0;
            background: var(--paper);
            border-radius: 12px 50px 50px 12px;
            padding: 45px;
            color: #1F150D;
            box-shadow: 
                -20px 20px 60px rgba(0,0,0,0.7), 
                inset 20px 0 40px rgba(0,0,0,0.08);
            transform-origin: left center;
            transition: transform 1.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease;
            display: flex; flex-direction: column; justify-content: center;
        }

        /* Weighted Physical Flip */
        .page-flip-animation {
            transform: rotateY(-140deg) translateZ(200px) rotateX(15deg) scale(0.85);
            opacity: 0;
            pointer-events: none;
        }

        /* GOLDEN TEXT ILLUMINATION */
        .gold-voice-highlight {
            color: #000;
            background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.3), transparent);
            background-size: 200% 100%;
            animation: shine 2s infinite linear;
            text-shadow: 0 0 12px rgba(212, 175, 55, 0.6);
            border-radius: 4px;
            padding: 2px 8px;
            transition: all 0.6s ease;
        }

        @keyframes shine {
            0% { background-position: 100% 0; }
            100% { background-position: -100% 0; }
        }

        .text-body { font-size: 1.4rem; line-height: 2.4; font-style: italic; text-align: justify; }

        /* Navigation Dock */
        .nav-dock {
            position: fixed; bottom: 50px; left: 50%; transform: translateX(-50%);
            display: flex; align-items: center; gap: 60px; z-index: 100;
        }
        .icon-btn { color: var(--gold); font-size: 1.8rem; opacity: 0.4; transition: 0.4s; cursor: pointer; background: none; border: none; }
        .icon-btn:hover { opacity: 1; transform: scale(1.1); }
        .play-circle { 
            width: 70px; height: 70px; 
            border: 1px solid rgba(212, 175, 55, 0.2); 
            border-radius: 50%; display: flex; align-items: center; justify-content: center; 
            background: rgba(212, 175, 55, 0.03);
        }
    </style>
</head>
<body>

    <div class="lamp-glow"></div>

    <button onclick="location.href='index.html'" class="fixed top-10 left-10 text-[#D4AF37] opacity-30 text-[10px] tracking-[0.4em] z-50">← ARCHIVE</button>

    <div class="book-stage">
        <div class="page-sheet" id="active-page">
            <span class="text-[10px] uppercase tracking-[0.5em] opacity-30 mb-12 block text-center">Sanctum Manuscript</span>
            <div id="content" class="text-body">
                </div>
        </div>
    </div>

    <div class="nav-dock">
        <button onclick="flipPage(-1)" class="icon-btn">◁</button>
        <div class="play-circle">
            <button onclick="handlePlay()" id="play-btn" class="icon-btn" style="opacity:1">▶</button>
        </div>
        <button onclick="flipPage(1)" class="icon-btn">▷</button>
    </div>

    <script>
        const archive = [
            "A reader lives a thousand lives before he dies. The man who never reads lives only one.",
            "Wisdom is the gold of the soul, refined by the fire of experience.",
            "Nature does not hurry, yet everything is accomplished. Stay grounded.",
            "In the silence of the library, the whispers of the ancients become clear.",
            "The path is long, but the words of the wise are a lamp unto your feet."
        ];

        let index = 0;
        let reading = false;
        let audioCtx;
        const synth = window.speechSynthesis;

        function initAudio() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        }

        function loadText() {
            document.getElementById('content').innerHTML = `<span id="verse">${archive[index]}</span>`;
        }

        function flipPage(dir) {
            initAudio();
            if (dir === 1 && index < archive.length - 1) {
                const page = document.getElementById('active-page');
                page.classList.add('page-flip-animation');
                playCrispySFX();

                setTimeout(() => {
                    index++;
                    loadText();
                    page.style.transition = 'none';
                    page.classList.remove('page-flip-animation');
                    page.style.opacity = '0';
                    page.style.transform = 'scale(0.85) translateZ(-150px)';
                    
                    setTimeout(() => {
                        page.style.transition = 'transform 1.4s cubic-bezier(0.16, 1, 0.3, 1), opacity 0.8s ease';
                        page.style.opacity = '1';
                        page.style.transform = 'scale(1) translateZ(0)';
                        if(reading) startGraveNarrator();
                    }, 60);
                }, 1300);

            } else if (dir === -1 && index > 0) {
                index--;
                loadText();
                playCrispySFX();
            }
        }

        function handlePlay() {
            initAudio();
            if (reading) {
                synth.cancel();
                document.getElementById('play-btn').innerText = "▶";
            } else {
                document.getElementById('play-btn').innerText = "‖";
                startGraveNarrator();
            }
            reading = !reading;
        }

        function startGraveNarrator() {
            synth.cancel();
            const verse = document.getElementById('verse');
            verse.classList.add('gold-voice-highlight');

            const msg = new SpeechSynthesisUtterance(archive[index]);
            msg.pitch = 0.55; 
            msg.rate = 0.75;  
            
            msg.onend = () => {
                verse.classList.remove('gold-voice-highlight');
                if (reading && index < archive.length - 1) {
                    setTimeout(() => flipPage(1), 1500);
                }
            };
            synth.speak(msg);
        }

        function playCrispySFX() {
            if(!audioCtx) return;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            const filter = audioCtx.createBiquadFilter();
            osc.type = 'brown-noise'; 
            filter.type = 'highpass'; filter.frequency.value = 1200;
            gain.gain.setValueAtTime(0.04, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.6);
            osc.connect(filter); filter.connect(gain); gain.connect(audioCtx.destination);
            osc.start(); osc.stop(audioCtx.currentTime + 0.6);
        }

        loadText();
    </script>
</body>
</html>
